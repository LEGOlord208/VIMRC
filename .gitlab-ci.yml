default:
  image: jd91mzm2/nix-flakes
  before_script:
    - nix profile install nixpkgs#cachix
    - cachix use jd91mzm2

    # GitLab can't cache /nix directly
    - mkdir -p .nix
    - mount --bind /nix .nix
  cache:
    paths:
      - .nix

Build NeoVim:
  stage: build
  script:
    - nix build .#neovim

Build Simple Terminal:
  stage: build
  script:
    - nix build .#st
